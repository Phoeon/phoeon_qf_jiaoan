<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			
			#wrap {
				width: 820px;
				margin: 0 auto;
				padding: 20px;
			}
			
			#wrap ul li {
				list-style: none;
				width: 260px;
				float: left;
				margin-left: 10px;
				
			}
			
			.circle {
				width: 258px;
				border: 1px solid #ccc;
				margin-bottom: 10px;
			}
			
			.circle img {
				width: 258px;
			}
			
			.circle p {
				padding: 10px;
				width: 238px;
				line-height: 25px;
				font-family: 'Microsoft yahei';
				text-align: center;
			}
			
			.circle p a {
				display: block;
				color: #000;
				text-decoration: none;
			}
			
			.circle p a:hover {
				color: #f69;
			}
			
			#btn {
				width: 300px;
				height: 40px;
				background: #ccc;
				color: #fff;
				cursor: pointer;
				margin: 10px auto;
				display: block;
				text-align: center;
				line-height: 40px;
			}
			
		</style>
	</head>

	<body>

		<div id="wrap">
			<ul>
				<li></li>
				<li></li>
				<li></li>
				<div style="clear: both;">
					
				</div>
			</ul>
		</div>
		<input type="button" id="btn" value="点击加载更多" />
		<script src="js/ajax.js" type="text/javascript"></script>
		<script type="text/javascript">
				var oWrap = document.getElementById("wrap");
				var oLi = oWrap.getElementsByTagName("li");
				var oBtn = document.getElementById("btn");
				var Num = 0;
				into(Num);
				oBtn.onclick = function(){
					Num+=8;
					into(Num);
				}
				
				
				function into(Num){
					ajax({
					url : 'data.php',
					success : function(data){
						var data = eval( '('+ data +')' )
						var html = '';
						for(var i=Num;i<Num+8;i++){
							html ='<div class="circle"><img src="'+data[i].src+'" width="'+data[i].width+'" height="'+data[i].height+'"/><p><a href="#">'+data[i].title+'</a></p></div>';
							//alert( html )
							oLi[getCpr()].innerHTML += html;
						}
					}
				})
				}
				
			
				function getCpr(){
					var index = 0;
					var iH = oLi[index].offsetHeight;
					for(var i=1;i<oLi.length;i++){
						if(oLi[i].offsetHeight<iH){
							index = i;
							iH = oLi[i].offsetHeight;
						}
					}
					return index;
				}
				

		</script>
	</body>

</html>