<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	
	</head>
	<body>
		
		<div id="box"></div>
		<input type="button" id="btn" value="button" />
		
		
		<script type="text/javascript">
			var oBox = document.getElementById("box");
			var oBtn = document.getElementById("btn");
		
				setInterval(function(){
					ajax(
						
						url:'teacher.php',
						method:'get',
						fn:function( rsp ){
							 var rsp = eval( rsp );
								 var str = '';
								 for(var i=0;i<rsp.length;i++){
								 	str += "<p>"+'姓名:'+rsp[i].name+',年龄:'+rsp[i].age+"</p>";
								 }
								 oBox.innerHTML = str;
						}
					)
				},3000)
		
				
				function ajax( mJson ){
					var asny = asny || true;
					var xhr = window.XMLHttpRequest?( new XMLHttpRequest() ) : ( new ActiveXObject('Microsoft XMLHTTP') ) ;
						xhr.open( mJson.method , mJson.url , mJson.asny );
						xhr.send();
						xhr.onreadystatechange = function(){
							if( xhr.readyState == 4 ){
								if( xhr.status >= 200 && xhr.status < 300 ){
									fn&fn( xhr.responseText );
								}else{
									alert( '出错了！' + xhr.status )
								}
								
							}
					}
				}
			
				
		
		</script>
	</body>
</html>
